{% extends "base.html" %}

{% load i18n %}
{% load breadcrumbs %}
{% load navigator %}

{% block meta_title %}{{ object|striptags|capfirst }}{% endblock %}

{% block breadcrumbs %}
    {% add_crumb 'Home' '/' %}
    {% add_crumb 'Polls' '/polls/' %}
    {% add_crumb object %}
{% endblock %}

{% block title %}
<div class="title">
    <h1>{{ object|escape|capfirst }} {% if object.closed %}[{% trans "Closed" %}]{% endif %}</h1>
</div>
{% endblock %}

{% block main %}
<div class="actions">
    <ul>
        {% if perms.knowledge.add_poll %}
        <li class="add"><a title="{% trans 'Add' %}" href="{% url poll_add %}">{% trans 'Add' %}</a></li>
        {% endif %}
        {% if perms.knowledge.change_poll %}
        <li class="edit"><a title="{% trans 'Edit' %}" href="{% url poll_edit object.pk %}">{% trans 'Edit' %}</a></li>
        {% endif %}
        {% if perms.knowledge.delete_poll %}
        <li class="delete"><a title="{% trans 'Delete' %}" href="{% url poll_delete object.pk %}">{% trans 'Delete' %}</a></li>
        {% endif %}
        {% if perms.knowledge.change_poll %}
        <li class="all"><a title="{% trans 'All' %}" href="{% url poll_list %}">{% trans 'All' %}</a></li>
        {% endif %}
    </ul>
</div>
{% objects_from object %}
{% with objects as object_list %}
{% include 'elements/navigator.html' %}
{% endwith %}
<div class="details">
    <ul class="choices">
        {% for choice in object.choices.all %}
        <li class="choice">
            {% if object.closed %}{{ choice }}{% else %}<a href="{{ choice.get_absolute_url }}">{{ choice }}</a>{% endif %}
            <span class="counter">[{{ choice.votes.count }}]</span>
        </li>
        {% endfor %}
    </ul>
    <p>
        {% include "elements/categories.html" %}
        {% include "elements/tags.html" %}
    </p>
</div>
{% include "elements/comments.html" %}
{% endblock %}
